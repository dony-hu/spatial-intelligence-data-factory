# 数据工厂测试用例矩阵（V1）

## 使用说明

1. 本文档用于统一管理跨场景测试用例。
2. 每条用例必须绑定一个场景、输入数据集和可度量预期结果。
3. `P0` 用于 CI 阻断，`P1` 用于日常回归，`P2` 用于压力/混沌测试。

## 用例模板

| 用例ID | 场景 | 级别 | 输入类型 | 前置条件 | 测试步骤 | 预期结果 | 指标口径 | 数据集ID |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| TC-ADDR-001 | 地址治理 | P0 | JSON | 地址字典已加载 | 执行标准化与分词 | 返回标准地址与分词结果 | 标准化准确率 | geo_addr_smoke_p0 |

## 场景1：地址治理（标准化/分词）

| 用例ID | 目标 | 级别 | 预期结果 |
| --- | --- | --- | --- |
| TC-ADDR-001 | 地址标准化 | P0 | 错别字、简称可归一到标准地址 |
| TC-ADDR-002 | 分词鲁棒性 | P0 | 中英文混排、符号干扰下分词稳定 |
| TC-ADDR-003 | 歧义处理 | P1 | 同名道路在不同行政区可正确区分 |
| TC-ADDR-004 | 性能压测 | P2 | 百万级地址吞吐与延迟达标 |

## 场景2：地址与空间实体关联

| 用例ID | 目标 | 级别 | 预期结果 |
| --- | --- | --- | --- |
| TC-LINK-001 | 一对一映射 | P0 | 可准确生成 `space_entity_id` |
| TC-LINK-002 | 一对多候选冲突 | P0 | 冲突可被识别并降级处理 |
| TC-LINK-003 | 跨业务源对齐 | P1 | 公安/城管数据可统一映射 |
| TC-LINK-004 | 时态有效性 | P1 | 失效实体不被误关联 |

## 场景3：数据标注（自动+人工+质检）

| 用例ID | 目标 | 级别 | 预期结果 |
| --- | --- | --- | --- |
| TC-LABEL-001 | 自动预标注 | P0 | 自动标签、框、置信度完整输出 |
| TC-LABEL-002 | 人工修改回写 | P0 | 人工修正可正确版本化保存 |
| TC-LABEL-003 | 质检一致性 | P1 | 双人一致性指标达标 |
| TC-LABEL-004 | 返工闭环 | P1 | 质检不通过可自动回流再标注 |

## 场景4：PDF/Word/BIM 抽取

| 用例ID | 目标 | 级别 | 预期结果 |
| --- | --- | --- | --- |
| TC-DOC-001 | PDF 字段抽取 | P0 | 关键字段提取准确率达标 |
| TC-DOC-002 | Word 表格抽取 | P0 | 表格结构与字段关系保持一致 |
| TC-DOC-003 | BIM 属性抽取 | P1 | 构件属性与层级关系正确 |
| TC-DOC-004 | 坐标转换 | P1 | 坐标系转换误差在阈值内 |

## 场景5：互联网内容抓取与融合

| 用例ID | 目标 | 级别 | 预期结果 |
| --- | --- | --- | --- |
| TC-WEB-001 | 抓取稳定性 | P0 | 分页/增量抓取可持续运行 |
| TC-WEB-002 | 去重清洗 | P0 | 重复与噪声内容可识别过滤 |
| TC-WEB-003 | 实体关联 | P1 | 抓取结果可关联空间实体 |
| TC-WEB-004 | 来源可信度 | P1 | 低可信来源自动降权 |

## 场景6：实体发现与运营闭环

| 用例ID | 目标 | 级别 | 预期结果 |
| --- | --- | --- | --- |
| TC-OPS-001 | 未识别实体触发 | P0 | 关联失败后自动创建候选实体 |
| TC-OPS-002 | 多源自动核验 | P0 | 自动生成证据包与建议动作 |
| TC-OPS-003 | 人工审核闭环 | P1 | 支持新建/合并/驳回并可审计 |
| TC-OPS-004 | 现场核实任务 | P1 | 可派发、回传、回写并驱动最终决策 |
| TC-OPS-005 | 误创建防护 | P1 | 冲突高风险候选禁止自动入库 |
| TC-OPS-006 | SLA 与积压告警 | P2 | 超时任务可自动告警升级 |

## 建议门禁

1. `P0`：每次提交必跑，失败阻断合并。
2. `P1`：每日定时回归，失败自动建缺陷。
3. `P2`：每周运行，输出容量与稳定性报告。

