# Iteration-003 派单：测试面板数据库查询能力（只读）

- 日期：2026-02-15
- 任务卡：TC-08
- 工作包：`workpackages/wp-test-panel-sql-query-readonly-v0.1.0.json`
- 牵头：项目管理总控线

## 目标

在测试面板提供“测试数据库数据查看 + SQL 查询（只读）”能力，支持排障与管理层快速验证。

## 必须交付

1. 测试面板新增查询区块（模板查询 + 自定义 SQL）。
2. 后端只读查询接口：
   - `POST /v1/governance/lab/sql/query`
   - `GET /v1/governance/lab/sql/templates`
   - `GET /v1/governance/lab/sql/history`
3. 安全约束：
   - 仅 `SELECT/WITH`
   - 白名单表
   - 强制 `LIMIT`
   - 查询超时
4. 弱数据兜底：缺字段显示 `-`，不得报错阻塞面板。
5. 审计可追踪：记录操作者、SQL 摘要、耗时、行数。

## 分工

1. 核心引擎与运行时线：只读 SQL 执行服务与安全约束。
2. 测试平台与质量门槛线：白名单表、模板 SQL、接口与安全测试。
3. 管理看板产品与前端线：查询 UI、结果表格、分页、错误展示。
4. 可观测与运营指标线：审计日志指标与慢查询告警。
5. 项目管理总控线：验收口径、发布开关、回滚预案。

## 排期

1. Day 1：后端接口 + 安全校验。
2. Day 2：前端面板 + 联调。
3. Day 3：测试、审计、验收上线。
