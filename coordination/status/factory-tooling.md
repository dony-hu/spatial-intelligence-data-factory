# 子线状态：核心引擎与运行时线

- 进度：100%
- Done：
  - `wp-core-engine-p0-stabilization-v0.1.0` gate 已重跑为 GO，运行时一致性门槛通过（`runtime_unified_3_11_plus=true`）
  - 已完成 ChangeRequest -> ActivateRuleset 审批硬门控（403/409/404/200 路径覆盖）
  - 已完成 `/lab/optimize/{batch_id}` 与 `/lab/change_requests/{change_id}` 最小闭环入口并通过回归
  - 已新增测试面板只读 SQL API：`POST /v1/governance/ops/sql/read-only-query`
  - 已完成 SQL 安全约束：仅 `SELECT/WITH`、白名单表、强制 `LIMIT`、查询超时、阻断审计
  - 已新增测试：`services/governance_api/tests/test_ops_sql_readonly_api.py`
  - 核心回归通过：`test_rulesets_api.py`、`test_ops_api.py`、`test_lab_api.py`、`test_observability_integration.py`
  - 已修复 web_e2e `/lab/optimize` 超时路径：`tests/web_e2e/conftest.py` 增强超时阈值、健康探测、重试退避与日志
  - 已增强 web_e2e catalog 执行器：`scripts/run_web_e2e_catalog.py` 增加浏览器参数兼容探测与运行时配置留痕
  - 已重跑 P0 gate：`output/workpackages/wp-core-engine-p0-stabilization-v0.1.0.report.json` 维持 `release_decision=GO`
  - 已补齐测试面板 SQL 模板/历史接口并纳入回归：`GET /v1/governance/lab/sql/templates`、`GET /v1/governance/lab/sql/history`
  - 已完成 SQL 面板接口回归：`services/governance_api/tests/test_lab_sql_api.py`（2/2 通过）
  - 已完成夜间门槛连续两次通过（`suite_web_e2e_catalog`）：
    - `output/workpackages/nightly-quality-gate-20260215_145134.md`（GO）
    - `output/workpackages/nightly-quality-gate-20260215_145217.md`（GO）
  - 已完成根因复盘：`20260215_144410` 报告出现“判定 NO_GO 与展示计数不一致”的瞬态门槛异常，后续重跑恢复并通过双次夜测验证稳定
- Next：
  - 持续观察 nightly 门槛判定一致性（重点关注 `sql_security.return_code` 与报告展示字段一致性）
- Blocker：无
- ETA：2026-02-16 10:30（本地时间）完成夜间稳定性复核（非阻断）
- Artifacts：
  - `coordination/status/factory-tooling.md`
  - `services/governance_worker/app/jobs/governance_job.py`
  - `services/governance_api/app/routers/ops.py`
  - `services/governance_api/tests/test_ops_sql_readonly_api.py`
  - `tests/web_e2e/conftest.py`
  - `scripts/run_web_e2e_catalog.py`
  - `services/governance_api/app/routers/lab.py`
  - `services/governance_api/tests/test_lab_sql_api.py`
  - `output/workpackages/wp-core-engine-p0-stabilization-v0.1.0.report.json`
  - `output/workpackages/wp-test-panel-sql-query-readonly-v0.1.0.report.json`
  - `output/workpackages/nightly-quality-gate-20260215_145134.md`
  - `output/workpackages/nightly-quality-gate-20260215_145217.md`
  - `output/lab_mode/web_e2e_latest.json`
