{
  "meta": {
    "name": "address-line-quality-audit-cases",
    "version": "2026-02-14",
    "description": "地址产线质量审计驱动用例（含互联网源核实与缺失能力迭代）",
    "governance_mode": "offline_toolpack_only",
    "llm_governance_enabled": false,
    "internet_required": false,
    "requires_local_toolpack": true,
    "pipeline": "public-security-address",
    "stages": [
      "preparation",
      "ingestion",
      "standardization",
      "fusion",
      "project_automation",
      "project_human_ops_trainable",
      "result_output"
    ]
  },
  "cases": [
    {
      "case_id": "P0-MAIN-001",
      "priority": "P0",
      "category": "mainline_verified_exists",
      "target_stage": "fusion",
      "input": {
        "record_id": "r-main-001",
        "raw": "上海市浦东新区世纪大道100号"
      },
      "expected": {
        "cleaning_pass": true,
        "verification_status": "VERIFIED_EXISTS",
        "conflict_code": null,
        "output_ready": true
      },
      "audit_focus": [
        "traceability",
        "verification_accuracy",
        "gate_compliance"
      ],
      "expected_iteration_action": "none",
      "target_tools": [
        "standardize_address.py",
        "relation_builder.py",
        "result_exporter.py"
      ]
    },
    {
      "case_id": "P0-MAIN-002",
      "priority": "P0",
      "category": "mainline_verified_not_exists",
      "target_stage": "project_human_ops_trainable",
      "input": {
        "record_id": "r-main-002",
        "raw": "上海市黄浦区不存在路9999号"
      },
      "expected": {
        "cleaning_pass": true,
        "verification_status": "VERIFIED_NOT_EXISTS",
        "conflict_code": null,
        "output_ready": true
      },
      "audit_focus": [
        "negative_verification",
        "evidence_integrity"
      ],
      "expected_iteration_action": "none",
      "target_tools": [
        "internet_source_verifier.py",
        "evidence_merger.py"
      ]
    },
    {
      "case_id": "P0-MAIN-003",
      "priority": "P0",
      "category": "mainline_unverifiable_online",
      "target_stage": "project_human_ops_trainable",
      "input": {
        "record_id": "r-main-003",
        "raw": "上海市静安区未知支路77号",
        "simulate": {
          "authoritative_registry": "timeout",
          "internet_sources": "all_unreachable"
        }
      },
      "expected": {
        "cleaning_pass": true,
        "verification_status": "UNVERIFIABLE_ONLINE",
        "conflict_code": "MISSING_CAPABILITY",
        "output_ready": false
      },
      "audit_focus": [
        "graceful_degradation",
        "false_positive_control"
      ],
      "expected_iteration_action": "generate_missing_capability_patch",
      "target_tools": [
        "missing_capability_router.py",
        "feedback_to_training_set.py"
      ]
    },
    {
      "case_id": "P1-FUSION-001",
      "priority": "P1",
      "category": "source_conflict_alias",
      "target_stage": "fusion",
      "input": {
        "record_id": "r-fusion-001",
        "raw": "上海浦东陆家嘴环路333号",
        "multi_source": {
          "source_a": "浦东新区陆家嘴环路333号",
          "source_b": "黄浦区陆家嘴环路333号"
        }
      },
      "expected": {
        "cleaning_pass": true,
        "verification_status": "UNVERIFIABLE_ONLINE",
        "conflict_code": "SOURCE_CONFLICT",
        "output_ready": false
      },
      "audit_focus": [
        "conflict_detection",
        "district_consistency"
      ],
      "expected_iteration_action": "refine_conflict_resolution_strategy",
      "target_tools": [
        "relation_builder.py",
        "evidence_merger.py"
      ]
    },
    {
      "case_id": "P1-FUSION-002",
      "priority": "P1",
      "category": "same_entity_multi_alias",
      "target_stage": "standardization",
      "input": {
        "record_id": "r-fusion-002",
        "raw": "上海黄浦南京东路100号",
        "aliases": [
          "上海市黄浦区南京东路100号",
          "黄浦区南京东路100号"
        ]
      },
      "expected": {
        "cleaning_pass": true,
        "verification_status": "VERIFIED_EXISTS",
        "conflict_code": null,
        "alias_merged": true
      },
      "audit_focus": [
        "alias_merge_accuracy",
        "duplicate_control"
      ],
      "expected_iteration_action": "none",
      "target_tools": [
        "standardize_address.py",
        "hierarchy_normalizer.py"
      ]
    },
    {
      "case_id": "P1-HUMANOPS-001",
      "priority": "P1",
      "category": "internet_verification_trainable",
      "target_stage": "project_human_ops_trainable",
      "input": {
        "record_id": "r-human-001",
        "raw": "上海市虹口区四川北路1200号",
        "internet_evidence": [
          {
            "source": "map_provider_a",
            "verdict": "exists",
            "score": 0.82
          },
          {
            "source": "map_provider_b",
            "verdict": "exists",
            "score": 0.76
          }
        ]
      },
      "expected": {
        "verification_status": "VERIFIED_EXISTS",
        "training_sample_written": true,
        "decision_reason_required": true
      },
      "audit_focus": [
        "human_ops_trainability",
        "evidence_pack_completeness"
      ],
      "expected_iteration_action": "update_training_feature_weights",
      "target_tools": [
        "internet_source_verifier.py",
        "feedback_to_training_set.py"
      ]
    },
    {
      "case_id": "P1-HUMANOPS-002",
      "priority": "P1",
      "category": "internet_verification_disagreement",
      "target_stage": "project_human_ops_trainable",
      "input": {
        "record_id": "r-human-002",
        "raw": "上海市杨浦区五角场路88号",
        "internet_evidence": [
          {
            "source": "map_provider_a",
            "verdict": "exists",
            "score": 0.89
          },
          {
            "source": "life_service_b",
            "verdict": "not_exists",
            "score": 0.71
          }
        ]
      },
      "expected": {
        "verification_status": "UNVERIFIABLE_ONLINE",
        "conflict_code": "SOURCE_CONFLICT",
        "manual_review_candidate": true
      },
      "audit_focus": [
        "cross_source_consistency",
        "conflict_label_precision"
      ],
      "expected_iteration_action": "improve_conflict_threshold_policy",
      "target_tools": [
        "evidence_merger.py",
        "auto_fix_planner.py"
      ]
    },
    {
      "case_id": "P2-DEGRADE-001",
      "priority": "P2",
      "category": "dirty_text_noise",
      "target_stage": "ingestion",
      "input": {
        "record_id": "r-degrade-001",
        "raw": "@@上海市!!!浦东新区世纪大道100号###"
      },
      "expected": {
        "cleaning_pass": true,
        "noise_removed": true,
        "verification_status": "VERIFIED_EXISTS"
      },
      "audit_focus": [
        "noise_robustness",
        "normalization_stability"
      ],
      "expected_iteration_action": "none",
      "target_tools": [
        "ingest_collector.py",
        "address_semantic_enricher.py"
      ]
    },
    {
      "case_id": "P2-DEGRADE-002",
      "priority": "P2",
      "category": "missing_core_component",
      "target_stage": "standardization",
      "input": {
        "record_id": "r-degrade-002",
        "raw": "黄浦区中山东一路"
      },
      "expected": {
        "cleaning_pass": false,
        "error_code": "CLEANING_INVALID_OUTPUT",
        "verification_status": "UNVERIFIABLE_ONLINE"
      },
      "audit_focus": [
        "invalid_input_rejection",
        "error_code_consistency"
      ],
      "expected_iteration_action": "improve_invalid_input_classifier",
      "target_tools": [
        "standardize_address.py"
      ]
    },
    {
      "case_id": "P2-DEGRADE-003",
      "priority": "P2",
      "category": "cross_city_mismatch",
      "target_stage": "standardization",
      "input": {
        "record_id": "r-degrade-003",
        "raw": "北京市朝阳区建国路88号"
      },
      "expected": {
        "cleaning_pass": false,
        "error_code": "CLEANING_INVALID_OUTPUT",
        "region_rejected": true
      },
      "audit_focus": [
        "region_boundary_control"
      ],
      "expected_iteration_action": "none",
      "target_tools": [
        "standardize_address.py",
        "hierarchy_normalizer.py"
      ]
    },
    {
      "case_id": "P0-GATE-001",
      "priority": "P0",
      "category": "write_gate_enforcement",
      "target_stage": "result_output",
      "input": {
        "record_id": "r-gate-001",
        "operation": "publish_draft",
        "execute": true,
        "confirmation": "absent"
      },
      "expected": {
        "blocked": true,
        "state": "pending_confirmation",
        "gate_violation": false
      },
      "audit_focus": [
        "confirmation_gate"
      ],
      "expected_iteration_action": "harden_server_side_gate_policy",
      "target_tools": [
        "agent_server"
      ]
    },
    {
      "case_id": "P1-AUTOOPS-001",
      "priority": "P1",
      "category": "text_credibility_low",
      "target_stage": "project_automation",
      "input": {
        "record_id": "r-auto-001",
        "raw": "上海市徐汇区淮海中路88号",
        "text_features": {
          "source_count": 1,
          "source_reliability": 0.42,
          "self_contradiction": true
        }
      },
      "expected": {
        "text_credibility_label": "low",
        "verification_status": "UNVERIFIABLE_ONLINE",
        "manual_review_candidate": true
      },
      "audit_focus": [
        "text_credibility"
      ],
      "expected_iteration_action": "retune_text_credibility_threshold",
      "target_tools": [
        "text_credibility_scorer.py",
        "auto_fix_planner.py"
      ]
    },
    {
      "case_id": "P1-AUTOOPS-002",
      "priority": "P1",
      "category": "coord_confidence_low",
      "target_stage": "project_automation",
      "input": {
        "record_id": "r-auto-002",
        "raw": "上海市黄浦区中山东一路1号",
        "geo": {
          "lat": 31.2334,
          "lng": 121.4900,
          "provider_spread_meter": 420
        }
      },
      "expected": {
        "coord_confidence_label": "low",
        "requires_recheck": true,
        "verification_status": "UNVERIFIABLE_ONLINE"
      },
      "audit_focus": [
        "coordinate_confidence",
        "recheck_routing"
      ],
      "expected_iteration_action": "update_geo_confidence_model",
      "target_tools": [
        "coord_confidence_scorer.py",
        "geo_resolver.py"
      ]
    },
    {
      "case_id": "P2-CAPABILITY-001",
      "priority": "P2",
      "category": "new_source_onboarding",
      "target_stage": "project_human_ops_trainable",
      "input": {
        "record_id": "r-cap-001",
        "raw": "上海市普陀区长寿路500号",
        "required_source": "government_open_data_api",
        "simulate": {
          "adapter_registered": false
        }
      },
      "expected": {
        "verification_status": "UNVERIFIABLE_ONLINE",
        "conflict_code": "MISSING_CAPABILITY",
        "missing_capability_item": "source_adapter:government_open_data_api"
      },
      "audit_focus": [
        "capability_gap_detection",
        "degrade_labeling"
      ],
      "expected_iteration_action": "generate_source_adapter_blueprint",
      "target_tools": [
        "missing_capability_router.py",
        "internet_source_verifier.py"
      ]
    },
    {
      "case_id": "P0-STORY-001",
      "priority": "P0",
      "category": "story_truth_completion_graph",
      "target_stage": "result_output",
      "input": {
        "record_id": "r-story-001",
        "raw": "广东省深圳市南山区前海顺丰总部大厦"
      },
      "expected": {
        "verification_status": "VERIFIED_EXISTS",
        "authenticity_confirmation_required": true,
        "min_trusted_source_count": 2,
        "standardized_completion_required": true,
        "required_standard_components": [
          "province",
          "city",
          "district",
          "street",
          "poi"
        ],
        "token_graph_chain_required": true,
        "audit_must_have_clear_conclusion": true
      },
      "audit_focus": [
        "authenticity_two_trusted_sources",
        "standardization_completion_with_street",
        "token_graph_chain_generation"
      ],
      "expected_iteration_action": "enforce_story_conclusion_rules",
      "target_tools": [
        "internet_source_verifier.py",
        "standardize_address.py",
        "address_graph_builder.py",
        "result_exporter.py"
      ]
    },
    {
      "case_id": "P2-OUTPUT-001",
      "priority": "P2",
      "category": "output_contract_completeness",
      "target_stage": "result_output",
      "input": {
        "record_id": "r-output-001",
        "raw": "上海市长宁区延安西路1000号"
      },
      "expected": {
        "output_contains": [
          "standardized_address",
          "verification_status",
          "attempted_sources",
          "evidence_pack",
          "audit_trace_id",
          "process_version"
        ],
        "schema_valid": true
      },
      "audit_focus": [
        "output_contract",
        "release_traceability"
      ],
      "expected_iteration_action": "fix_output_schema_mapping",
      "target_tools": [
        "result_exporter.py",
        "release_reporter.py"
      ]
    }
  ]
}