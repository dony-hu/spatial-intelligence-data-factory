# 工具适配规范

## 目标

将此前 Codex 特定的操作规则映射为可在任意 AI 编码 IDE/工具链中执行的项目级要求。

## 映射原则

1. 在不同工具间保持项目要求语义不变。
2. 将工具特定语法视为实现细节。
3. 策略应保存在仓库中，而非聊天记忆中。

## Codex 到项目要求映射

### A. 沟通与输出

- Codex 行为：回复简洁、结构化、可执行。
- 项目要求：所有实施报告 MUST 包含范围、变更、验证与后续行动。
- 项目要求：所有工具与 skills 生成的项目文档 MUST 默认使用中文。
- 跨工具实现：PR 模板与变更总结清单。

### B. 工作执行

- Codex 行为：先检查再修改，修改后验证，避免破坏性命令。
- 项目要求：变更 MUST 包含变更前上下文记录与变更后验证证据。
- 跨工具实现：提交清单 + CI 日志 + 回滚说明。

### C. 工程质量

- Codex 行为：在适用时于完成前执行 lint/test/build。
- 项目要求：合并前质量门禁为强制要求。
- 跨工具实现：具备阻断检查的 CI 流水线。

### D. 协作与交接

- Codex 行为：频繁进度更新并明确说明假设。
- 项目要求：每个关键里程碑 MUST 记录负责人、时间戳、影响与证据链接。
- 跨工具实现：每日日志 + 每周汇总。

### E. 安全与防护

- Codex 行为：不泄露密钥，谨慎执行提权。
- 项目要求：仓库内不得出现明文密钥；遵循最小权限；必须保留审计轨迹。
- 跨工具实现：密钥扫描 + 访问权限审查。

### F. 工具运行规则

- Codex 行为：技能、沙箱、提权前缀等机制。
- 项目要求：工具运行规则 MAY 因工具而异，但 MUST 保持治理、安全与可追溯结果一致。
- 跨工具实现：维护按工具划分的运行手册，同时不改变项目策略。

## 各工具适配模板

为每个工具（Codex/Cursor/Claude Code 等）使用以下条目：

- 工具名称：
- 环境约束：
- 命令执行模型：
- 审批/提权流程：
- 合并前必需检查：
- 日志路径与格式：
- 已知限制：

## 当前状态

- 项目级策略存放于 `PROJECT_REQUIREMENTS.md`。
- 日志标准存放于 `PROJECT_MANAGEMENT_REQUIREMENTS.md` 与 `schemas/worklog.schema.json`。
- 工具特定行为仅应以本文件中的适配项形式补充。
