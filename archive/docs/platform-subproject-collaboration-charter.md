# 平台层-子项目层协同章程（BMAD）

## 1. 目标与适用范围

本章程用于规范空间智能数据工厂在跨地域场景下的协同方式，覆盖：

- 平台层（本仓库）共性数据面与服务面能力建设。
- 子项目层（上海、昆山、吴江、北京、深圳宝安）落地实施与定制交付。

原则：平台层负责可复用能力沉淀，子项目层负责本地化定制，不混淆边界。

## 2. 双层治理模型

### 2.1 平台层职责

- 维护统一数据契约、服务契约、接口版本策略。
- 维护核心能力域路线图（地址治理、调度能力、质量治理、可观测等）。
- 维护共性组件、模板与标准流程。
- 输出跨项目可复用版本并提供发布说明。

### 2.2 子项目层职责

- 依据平台能力完成本地业务落地。
- 提交需求时必须说明复用性与跨项目适配价值。
- 定制需求默认在子项目内实现，不直接进入平台层。

## 3. 需求准入与分流

## 3.1 准入规则

- 满足“至少可被两个地区复用”才可进入平台层候选池。
- 未满足复用条件的需求，归入子项目 Backlog。
- 涉及平台公共契约变更的需求，必须走架构评审。

## 3.2 需求分流流程

1. 子项目提交需求卡（场景、复用对象、影响范围、SLA）。
2. 平台 PM 与架构师执行“复用性评审”。
3. 评审通过进入平台 PRD；未通过退回子项目执行。
4. 所有结论沉淀到周会纪要与状态文件。

## 4. BMAD 阶段执行规则

### 4.1 Analysis

- 输出跨地域场景地图、统一术语表、共性问题清单。
- 固化 In Scope / Out of Scope，避免范围漂移。

### 4.2 Planning

- 以能力域拆分 PRD，不按地区拆分 PRD。
- 每个能力域明确：业务价值、复用对象、接口影响、验收标准。

### 4.3 Solutioning

- 架构文档必须包含版本兼容策略与迁移计划。
- 数据模型或 API 变更必须附跨项目影响分析。

### 4.4 Implementation

- Sprint 以能力交付为单位，不以地区交付为单位。
- 子项目接入采用版本化发布与灰度策略。

## 5. 协同节奏（固定会议）

- 每周一：平台组合状态会（查看 `/workflow-status` 与关键阻塞）。
- 每周三：能力对齐会（只讨论共性能力缺口与复用落地）。
- 每两周：架构与契约评审会（变更、兼容性、迁移计划）。
- 每月：复用率与交付质量复盘会（指标评估与优先级校正）。

## 6. 角色分工（RACI）

- BMad Master：维护阶段推进、状态一致性与流程纪律。
- 平台 PM：管理范围边界、优先级与 PRD 完整性。
- 架构师：把关契约稳定性、跨地区兼容与演进路线。
- Scrum Master：组织能力域迭代，跟踪交付风险。
- 子项目负责人：本地落地、反馈问题、提交复用性证据。

## 7. 指标与治理看板

- 北极星指标：平台能力复用率。
- 辅助指标：
  - 定制需求拦截率（应留在子项目的需求被正确分流比例）。
  - 破坏性接口变更次数。
  - 跨项目回归缺陷密度。
  - 子项目接入 lead time（从发布到稳定运行时间）。

## 8. 变更控制

- 任何平台公共能力变更需提交变更单（影响范围、回滚方案、迁移窗口）。
- 紧急变更须在 24 小时内补齐记录与影响复盘。
- 未经评审不得修改平台公共数据契约与 API 契约。

## 9. 文档与审计要求

- 平台层所有关键决策必须沉淀到 `docs/` 并可追溯。
- 子项目接入记录需附版本号、变更说明与验收结果。
- 会议决议需在 48 小时内更新到对应 BMAD 工件。
